"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9620],{85054:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>c,toc:()=>p});var r=e(74848),i=e(28453);const s={sidebar_position:2,description:"Gin \u6d4b\u8bd5"},o=void 0,c={id:"go/Gin/\u6d4b\u8bd5",title:"\u6d4b\u8bd5",description:"Gin \u6d4b\u8bd5",source:"@site/docs/go/Gin/\u6d4b\u8bd5.md",sourceDirName:"go/Gin",slug:"/go/Gin/\u6d4b\u8bd5",permalink:"/docs/go/Gin/\u6d4b\u8bd5",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,description:"Gin \u6d4b\u8bd5"},sidebar:"goSidebar",previous:{title:"\u7b80\u4ecb\u4e0e\u5b89\u88c5",permalink:"/docs/go/Gin/\u7b80\u4ecb\u4e0e\u5b89\u88c5"},next:{title:"\u89e3\u6790\u8bf7\u6c42\u53c2\u6570",permalink:"/docs/go/Gin/\u89e3\u6790\u8bf7\u6c42\u53c2\u6570"}},a={},p=[{value:"\u7b80\u5355api\u6d4b\u8bd5\u793a\u4f8b",id:"\u7b80\u5355api\u6d4b\u8bd5\u793a\u4f8b",level:2}];function d(n){const t={code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"\u7b80\u5355api\u6d4b\u8bd5\u793a\u4f8b",children:"\u7b80\u5355api\u6d4b\u8bd5\u793a\u4f8b"}),"\n",(0,r.jsxs)(t.p,{children:["HTTP \u6d4b\u8bd5\u9996\u9009 ",(0,r.jsx)(t.code,{children:"net/http/httptest"})," \u5305\u3002"]}),"\n",(0,r.jsx)(t.p,{children:"main.go \u6587\u4ef6"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"github.com/gin-gonic/gin"\n)\n\nfunc pingHandler(c *gin.Context) {\n\tc.String(200, "pong")\n}\n\nfunc setupRouter() *gin.Engine {\n\trouter := gin.Default()\n\trouter.GET("/ping", pingHandler)\n\n\treturn router\n}\n\nfunc main() {\n\tr := setupRouter()\n\n\terr := r.Run("127.0.0.1:8000")\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n}\n\n'})}),"\n",(0,r.jsx)(t.p,{children:"main_test.go \u6587\u4ef6"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'package main\n\nimport (\n\t"github.com/stretchr/testify/assert"\n\t"net/http"\n\t"net/http/httptest"\n\t"testing"\n)\n\nfunc TestPing(t *testing.T) {\n\tr := setupRouter()\n\tw := httptest.NewRecorder()\n\treq, _ := http.NewRequest("GET", "/ping", nil)\n\tr.ServeHTTP(w, req)\n\n\tassert.Equal(t, 200, w.Code)\n\tassert.Equal(t, "pong", w.Body.String())\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"\u5904\u7406\u4f9d\u8d56\u5173\u7cfb"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"go mod tidy\n"})}),"\n",(0,r.jsx)(t.p,{children:"\u6267\u884c\u5355\u5143\u6d4b\u8bd5"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"go test -v .\n"})})]})}function l(n={}){const{wrapper:t}={...(0,i.R)(),...n.components};return t?(0,r.jsx)(t,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},28453:(n,t,e)=>{e.d(t,{R:()=>o,x:()=>c});var r=e(96540);const i={},s=r.createContext(i);function o(n){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function c(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),r.createElement(s.Provider,{value:t},n.children)}}}]);