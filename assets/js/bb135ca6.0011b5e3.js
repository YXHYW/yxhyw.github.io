"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8678],{59779:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>c});var r=n(74848),l=n(28453);const t={sidebar_position:1,description:"Postgres\u7b80\u4ecb\u4e0e\u5b89\u88c5"},o=void 0,i={id:"database/PostgreSQL/\u57fa\u7840/\u7b80\u4ecb\u4e0e\u5b89\u88c5",title:"\u7b80\u4ecb\u4e0e\u5b89\u88c5",description:"Postgres\u7b80\u4ecb\u4e0e\u5b89\u88c5",source:"@site/docs/database/PostgreSQL/\u57fa\u7840/\u7b80\u4ecb\u4e0e\u5b89\u88c5.md",sourceDirName:"database/PostgreSQL/\u57fa\u7840",slug:"/database/PostgreSQL/\u57fa\u7840/\u7b80\u4ecb\u4e0e\u5b89\u88c5",permalink:"/docs/database/PostgreSQL/\u57fa\u7840/\u7b80\u4ecb\u4e0e\u5b89\u88c5",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"Postgres\u7b80\u4ecb\u4e0e\u5b89\u88c5"},sidebar:"dbSidebar",previous:{title:"\u57fa\u7840",permalink:"/docs/category/\u57fa\u7840-1"},next:{title:"\u6280\u80fd\u56fe\u8c31",permalink:"/docs/database/PostgreSQL/\u57fa\u7840/\u6280\u80fd\u56fe\u8c31"}},d={},c=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u7279\u70b9",id:"\u7279\u70b9",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"docker\u5b89\u88c5postgresql",id:"docker\u5b89\u88c5postgresql",level:3},{value:"\u4f7f\u7528\u5305\u7ba1\u7406\u5668\u5b89\u88c5",id:"\u4f7f\u7528\u5305\u7ba1\u7406\u5668\u5b89\u88c5",level:3},{value:"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5",id:"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5",level:3}];function a(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,r.jsx)(s.p,{children:"PostgreSQL\u662f\u4e00\u79cd\u5f00\u6e90\u5bf9\u8c61\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3002"}),"\n",(0,r.jsx)(s.h2,{id:"\u7279\u70b9",children:"\u7279\u70b9"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7a33\u5b9a\u53ef\u9760\u3002\u652f\u6301WAL\u3001PITR\u3001\u5f02\u6b65\u590d\u5236\u3001\u540c\u6b65\u590d\u5236\u7b49\u6280\u672f\u4fdd\u969c\u6570\u636e\u9ad8\u53ef\u7528\u6027\u3002"}),"\n",(0,r.jsx)(s.li,{children:"\u5f00\u6e90\u3002\u5f00\u6e90\u534f\u8bae\u7c7b\u4f3cBSD\u548cMIT\uff0c\u5f00\u653e\u5ea6\u5f88\u9ad8\u3002"}),"\n",(0,r.jsx)(s.li,{children:"\u4e30\u5bcc\u7684\u6570\u636e\u7c7b\u578b\u3002\u5305\u62ec\u57fa\u672c\u7684\u6574\u578b\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u3001\u65f6\u95f4\u6233\u3001UUID\uff0c\u8fd8\u6709JSON\u3001XML\u3001Key-Value\uff0c\u5730\u7406\u578b\u7684\u70b9\u3001\u7ebf\u3001\u591a\u8fb9\u5f62\u7b49\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u3002"}),"\n",(0,r.jsx)(s.li,{children:"\u590d\u6742SQL\u652f\u6301\u66f4\u597d\u3002\u76f8\u8f83\u4e8eMySQL\uff0cPostgreSQL\u5bf9\u591a\u5c42\u5d4c\u5957\u5b50\u67e5\u8be2\u652f\u6301\u66f4\u597d\uff0c\u800c\u4e14\u63d0\u4f9b\u4e30\u5bcc\u7684\u5185\u7f6e\u51fd\u6570"}),"\n",(0,r.jsx)(s.li,{children:"\u63d0\u4f9b\u4e13\u95e8\u7684\u6027\u80fd\u4f18\u5316\u5de5\u5177\u3002PostgreSQL\u63d0\u4f9b\u4e13\u95e8\u7684\u6027\u80fd\u4f18\u5316\u5de5\u5177\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5b9a\u4f4d\u95ee\u9898\u3002"}),"\n",(0,r.jsx)(s.li,{children:"\u62d3\u5c55\u6027\u5f3a\u3002\u7f16\u5199\u63d2\u4ef6\u62d3\u5c55\u529f\u80fd\u5f88\u65b9\u4fbf\u3002"}),"\n",(0,r.jsx)(s.li,{children:"\u8f7b\u4fbf\u5c0f\u5de7\u3002\u76f8\u8f83\u4e8eOracle\uff0cPostgreSQL\u5360\u7528\u7684\u786c\u4ef6\u8d44\u6e90\u66f4\u5c11\u3002"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,r.jsx)(s.h3,{id:"docker\u5b89\u88c5postgresql",children:"docker\u5b89\u88c5postgresql"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u4f7f\u7528docker\u5b89\u88c5\u7684postgresql\uff0cdba\u7528\u6237\u540d\u4e3a",(0,r.jsx)(s.code,{children:"postgres"})]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'version: "3"\n\nservices:\n  postgresql:\n    image: postgres:latest\n    container_name: postgres\n    ports:\n      - 5432:5432\n    volumes:\n      - /home/apps/postgresql/data:/var/lib/postgresql/data\n    environment:\n      - "POSTGRES_PASSWORD=123456"\n'})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u5728\u5bb9\u5668\u5185\u6267\u884c",(0,r.jsx)(s.code,{children:"psql -U postgres -W"}),"\uff0c\u8f93\u5165\u5bc6\u7801\u540e\u5373\u53ef\u901a\u8fc7dba\u8fdb\u5165\u63a7\u5236\u53f0\u3002\u6216\u8005\u5207\u6362\u5230postgres\u7528\u6237\uff1a",(0,r.jsx)(s.code,{children:"su - postgres"}),"\uff0c\u5207\u6362\u7528\u6237\u540e\u6267\u884c",(0,r.jsx)(s.code,{children:"psql"}),"\u5373\u53ef\u767b\u8fdb\u63a7\u5236\u53f0\u3002"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"\u4f7f\u7528\u5305\u7ba1\u7406\u5668\u5b89\u88c5",children:"\u4f7f\u7528\u5305\u7ba1\u7406\u5668\u5b89\u88c5"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7cfb\u7edf\uff1acentos7 64\u4f4d"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"# \u6dfb\u52a0\u5b98\u65b9\u6e90\nsudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm\n\n# \u5b89\u88c5\nsudo yum install -y postgresql14-server\n\n# \u521d\u59cb\u5316\nsudo /usr/pgsql-14/bin/postgresql-14-setup initdb\n\n# \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\nsudo systemctl enable postgresql-14\nsudo systemctl start postgresql-14\n"})}),"\n",(0,r.jsx)(s.h3,{id:"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5",children:"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"\u7cfb\u7edf\u7248\u672c\uff1acentos 7 64\u4f4d"}),"\n",(0,r.jsx)(s.li,{children:"pgsql\u7248\u672c\uff1a15.2"}),"\n",(0,r.jsxs)(s.li,{children:["\u5b98\u65b9\u6587\u6863\uff1a",(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/installation.html",children:"https://www.postgresql.org/docs/current/installation.html"})]}),"\n",(0,r.jsxs)(s.li,{children:["\u4ece\u5b98\u7f51\u4e0b\u8f7d\u6e90\u7801\u5305\uff1a",(0,r.jsx)(s.a,{href:"https://www.postgresql.org/ftp/source/",children:"https://www.postgresql.org/ftp/source/"})]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"# \u5b89\u88c5\u4f9d\u8d56\nyum install -y readline readline-devel zlib zlib-devel gcc\n\n# debian 12, bison\u548cflex\u7528\u4e8e\u5f00\u53d1\u7248\u8c03\u8bd5, \u975e\u5fc5\u9700\u5b89\u88c5\nsudo apt install -y gcc libreadline-dev zlib1g-dev make bison flex\n\n# \u521b\u5efa\u7528\u6237\u5e76\u4fee\u6539\u5bc6\u7801\nuseradd postgres\npasswd postgres\n\nsu - postgres\nmkdir -p $HOME/pgsql\n\n# \u8fdb\u5165\u6e90\u7801\u5305\u89e3\u538b\u76ee\u5f55\u7f16\u8bd1\n./configure --prefix=/home/postgres/pgsql\nmake\nmake install\n\n# \u5c06/home/postgres/pgsql/bin\u76ee\u5f55\u52a0\u5230postgres\u7528\u6237\u7684PATH\u73af\u5883\u53d8\u91cf\n# 1. \u521d\u59cb\u5316\u6570\u636e\u76ee\u5f55\ninitdb -D /home/postgres/pgsql/data\n# 2. \u542f\u52a8\u5b9e\u4f8b\npg_ctl -D /home/postgres/pgsql/data -l logfile start\n# 3. \u521b\u5efa\u6570\u636e\u5e93test\ncreatedb test\n# 4. \u4ece\u547d\u4ee4\u884c\u4f7f\u7528psql\u5de5\u5177\u8fde\u63a5\u5230test\u6570\u636e\u5e93\npsql -d test\n"})}),"\n",(0,r.jsxs)(s.p,{children:["\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5\u5b8c\u540e\uff0c\u6570\u636e\u5e93\u670d\u52a1\u9ed8\u8ba4\u53ea\u5141\u8bb8\u672c\u5730\u8fde\u63a5\uff0c\u9700\u4fee\u6539 ",(0,r.jsx)(s.code,{children:"/home/postgres/pgsql/data/pg_hba.conf"})," \u6587\u4ef6\u548c",(0,r.jsx)(s.code,{children:"postgresql.conf"}),"\u6587\u4ef6\u3002"]}),"\n",(0,r.jsx)(s.p,{children:"postgresql.conf\u4e2d\u7f16\u8f91"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"listen_addresses = '*'\n"})}),"\n",(0,r.jsx)(s.p,{children:"pg_hba.conf \u6dfb\u52a0"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"host all all 0.0.0.0/0 scram-sha-256\n\n# \u4fee\u6539pg_hba.conf\u6587\u4ef6\u53ef\u4ee5\u70ed\u52a0\u8f7d, \u4e0d\u884c\u518d\u91cd\u542f\npg_ctl reload -D /home/postgres/pgsql/data\n"})})]})}function p(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>i});var r=n(96540);const l={},t=r.createContext(l);function o(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);